var routes=function(t){var e=t.pushState;t.pushState=function(o){return"function"==typeof t.onpushstate&&t.onpushstate({state:o}),setTimeout(n.check,10),e.apply(t,arguments)};var n={root:"/",routes:[],alwaysFunc:function(){},config:function(t){for(option in t)this[option]=t[option];return this},on:function(t,e){return this.routes.push({re:t,handler:e}),this},"default":function(t){return this.routes.push({re:"",handler:t}),this},check:function(t){var e=n.clean(n.root),o=decodeURI(location.pathname);o=n.clean(o),o=n.clean(o.replace(new RegExp("^"+e),""));for(var r=0;r<n.routes.length;r++){var a=o.match(n.routes[r].re);if(a){a.shift(),n.routes[r].handler.apply({},[a]);break}}return n.alwaysFunc(o),n},clean:function(t){return t.replace(/\/$/,"").replace(/^\//,"")},always:function(t){this.alwaysFunc=t}};return window.addEventListener("popstate",n.check),window.addEventListener("DOMContentLoaded",n.check),n}(window.history);